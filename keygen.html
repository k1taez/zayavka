<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåô Moon Blossom - –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–ª—é—á–µ–π</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: rgba(25, 25, 35, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            border: 2px solid #4a3c8c;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .header {
            margin-bottom: 30px;
        }

        .logo {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .title {
            font-size: 2em;
            color: #8a6de9;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .subtitle {
            color: #a0a0c0;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .info-box {
            background: rgba(60, 50, 120, 0.3);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 4px solid #8a6de9;
        }

        .info-text {
            color: #c0c0e0;
            line-height: 1.6;
        }

        .generate-btn {
            background: linear-gradient(135deg, #8a6de9, #6a4cce);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            margin-bottom: 20px;
            width: 100%;
        }

        .generate-btn:hover {
            background: linear-gradient(135deg, #9a7df9, #7a5cde);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(138, 109, 233, 0.4);
        }

        .generate-btn:active {
            transform: translateY(0);
        }

        .key-display {
            background: rgba(40, 40, 60, 0.8);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 2px solid #5a4a9c;
            display: none;
        }

        .key-text {
            font-family: 'Courier New', monospace;
            font-size: 1.3em;
            color: #8aff80;
            font-weight: bold;
            letter-spacing: 2px;
            word-break: break-all;
        }

        .copy-btn {
            background: rgba(80, 70, 150, 0.8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-top: 10px;
            width: 100%;
        }

        .copy-btn:hover {
            background: rgba(100, 90, 170, 0.8);
        }

        .timer {
            color: #ffa500;
            font-weight: bold;
            margin-top: 10px;
            font-size: 1.1em;
        }

        .instructions {
            background: rgba(50, 50, 70, 0.6);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
        }

        .instructions h3 {
            color: #8a6de9;
            margin-bottom: 10px;
        }

        .instructions ol {
            padding-left: 20px;
            color: #c0c0e0;
        }

        .instructions li {
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .footer {
            margin-top: 20px;
            color: #8888a8;
            font-size: 0.9em;
        }

        .cooldown {
            color: #ff6b6b;
            font-weight: bold;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üåô</div>
            <h1 class="title">MOON BLOSSOM</h1>
            <p class="subtitle">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä 6-—á–∞—Å–æ–≤—ã—Ö –∫–ª—é—á–µ–π</p>
        </div>

        <div class="info-box">
            <p class="info-text">
                –ö–∞–∂–¥—ã–π –∫–ª—é—á –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ <strong>6 —á–∞—Å–æ–≤</strong> —Å –º–æ–º–µ–Ω—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
                –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–ª—é—á.
            </p>
        </div>

        <button class="generate-btn" id="generateBtn">
            üóùÔ∏è –°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ –ö–õ–Æ–ß
        </button>

        <div class="cooldown" id="cooldownText" style="display: none;">
            –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–ª—é—á–∞
        </div>

        <div class="key-display" id="keyDisplay">
            <div class="key-text" id="keyText"></div>
            <button class="copy-btn" id="copyBtn">
                üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
            </button>
            <div class="timer" id="timer">
                –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ: <span id="expiryTime"></span>
            </div>
        </div>

        <div class="instructions">
            <h3>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:</h3>
            <ol>
                <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á"</li>
                <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á</li>
                <li>–í—Å—Ç–∞–≤—å—Ç–µ –∫–ª—é—á –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ Moon Blossom</li>
                <li>–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ 6 —á–∞—Å–æ–≤!</li>
            </ol>
        </div>

        <div class="footer">
            1
        </div>
    </div>

    <script>
        class KeyGenerator {
            constructor() {
                this.generateBtn = document.getElementById('generateBtn');
                this.keyDisplay = document.getElementById('keyDisplay');
                this.keyText = document.getElementById('keyText');
                this.copyBtn = document.getElementById('copyBtn');
                this.expiryTime = document.getElementById('expiryTime');
                this.cooldownText = document.getElementById('cooldownText');
                this.isCooldown = false;
                
                this.init();
            }

            init() {
                this.generateBtn.addEventListener('click', () => this.generateKey());
                this.copyBtn.addEventListener('click', () => this.copyKey());
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª—é—á –≤ localStorage
                this.checkStoredKey();
            }

            generateKey() {
                if (this.isCooldown) return;
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–ª—é—á –≤ —Ñ–æ—Ä–º–∞—Ç–µ MOON-XXXX-XXXX-XXXX
                const segments = [];
                for (let i = 0; i < 3; i++) {
                    segments.push(this.generateSegment(4));
                }
                const key = 'MOON-' + segments.join('-');

                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è (6 —á–∞—Å–æ–≤)
                const now = new Date();
                const expiry = new Date(now.getTime() + 6 * 60 * 60 * 1000);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                const keyData = {
                    key: key,
                    expiry: expiry.getTime(),
                    generated: now.getTime()
                };
                localStorage.setItem('moonBlossomKey', JSON.stringify(keyData));

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–ª—é—á
                this.displayKey(key, expiry);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á –≤ GitHub (—ç—Ç–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ)
                this.addKeyToGitHub(key);
                
                // –í–∫–ª—é—á–∞–µ–º –∫—É–ª–¥–∞—É–Ω
                this.startCooldown();
            }

            generateSegment(length) {
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                let result = '';
                for (let i = 0; i < length; i++) {
                    result += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                return result;
            }

            displayKey(key, expiry) {
                this.keyText.textContent = key;
                this.expiryTime.textContent = expiry.toLocaleString('ru-RU');
                this.keyDisplay.style.display = 'block';
                
                // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –∫–ª—é—á—É
                this.keyDisplay.scrollIntoView({ behavior: 'smooth' });
            }

            copyKey() {
                navigator.clipboard.writeText(this.keyText.textContent).then(() => {
                    const originalText = this.copyBtn.textContent;
                    this.copyBtn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                    setTimeout(() => {
                        this.copyBtn.textContent = originalText;
                    }, 2000);
                });
            }

            checkStoredKey() {
                const stored = localStorage.getItem('moonBlossomKey');
                if (stored) {
                    const keyData = JSON.parse(stored);
                    const now = new Date().getTime();
                    
                    if (now < keyData.expiry) {
                        // –ö–ª—é—á –µ—â–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
                        const expiry = new Date(keyData.expiry);
                        this.displayKey(keyData.key, expiry);
                    } else {
                        // –ö–ª—é—á –∏—Å—Ç–µ–∫
                        localStorage.removeItem('moonBlossomKey');
                    }
                }
            }

            startCooldown() {
                this.isCooldown = true;
                this.generateBtn.disabled = true;
                this.cooldownText.style.display = 'block';
                
                let seconds = 30;
                const countdown = setInterval(() => {
                    this.cooldownText.textContent = `–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${seconds} —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–ª—é—á–∞`;
                    seconds--;
                    
                    if (seconds < 0) {
                        clearInterval(countdown);
                        this.isCooldown = false;
                        this.generateBtn.disabled = false;
                        this.cooldownText.style.display = 'none';
                    }
                }, 1000);
            }

            addKeyToGitHub(key) {
                // –í —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å –∫ –≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É,
                // –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–∏—Ç –∫–ª—é—á –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
                console.log('–ö–ª—é—á –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ GitHub:', key);
                
                // –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å GitHub API (—Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞)
                // this.addKeyViaGitHubAPI(key);
            }

            // –ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞ —á–µ—Ä–µ–∑ GitHub API
            async addKeyViaGitHubAPI(key) {
                const GITHUB_TOKEN = 'your_github_token_here';
                const REPO_OWNER = 'yourusername';
                const REPO_NAME = 'yourrepo';
                
                try {
                    // –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
                    const response = await fetch(
                        `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/keys.txt`,
                        {
                            headers: {
                                'Authorization': `token ${GITHUB_TOKEN}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        }
                    );
                    
                    const data = await response.json();
                    const currentContent = atob(data.content);
                    const newContent = currentContent + '\n' + key;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–π–ª
                    await fetch(
                        `https://api.github.com/repos/${REPO_OWNER}/${REPO_NAME}/contents/keys.txt`,
                        {
                            method: 'PUT',
                            headers: {
                                'Authorization': `token ${GITHUB_TOKEN}`,
                                'Accept': 'application/vnd.github.v3+json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                message: `Add key: ${key}`,
                                content: btoa(newContent),
                                sha: data.sha
                            })
                        }
                    );
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–ª—é—á–∞ –≤ GitHub:', error);
                }
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            new KeyGenerator();
        });
    </script>
</body>
</html>
